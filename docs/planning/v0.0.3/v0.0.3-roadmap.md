# FerrisScript v0.0.3 Roadmap ü¶Ä

**Version**: 0.0.3 (Patch Release)  
**Focus**: Editor Experience Alpha  
**Timeline**: 2-3 weeks  
**Prerequisites**: v0.0.2 (syntax highlighting foundation)

---

## üéØ Overview

**Strategic Goal**: Deliver professional editor experience with enhanced diagnostics, preparing foundation for LSP implementation.

**Key Priorities**:

1. Enhanced error diagnostics with error codes
2. VS Code extension polish and features
3. Development tooling and scripts
4. Performance benchmarking framework

**Alignment with v0.1.0 Strategy**: Continues execution of reprioritized roadmap by significantly improving editor experience and developer diagnostics before LSP implementation.

---

## üì¶ High Priority Deliverables

### 1. Enhanced Error Diagnostics üî•

**Status**: ‚è≥ In Progress (Phase 2 Complete)  
**Priority**: Critical

**Prerequisites**: v0.0.2 error message foundation

**Scope**:

- [x] Implement error code system (E001, E002, etc.) - **Phase 1 Complete** ‚úÖ
- [x] Add "Did you mean?" suggestions for common typos - **Phase 2 Complete** ‚úÖ
  - [x] Variable name typos (Levenshtein distance)
  - [x] Function name typos
  - [x] Type name typos
  - [ ] Keyword suggestions (Deferred to Phase 2B)
- [ ] Link errors to documentation (Phase 3)
- [x] Create error code reference documentation (ERROR_CODES.md) ‚úÖ
- [ ] Improve error recovery (continue parsing after errors) (Future phase)

**Error Code Categories**:

- E001-E099: Lexical errors
- E100-E199: Syntax errors
- E200-E299: Type errors
- E300-E399: Semantic errors
- E400-E499: Runtime errors

**Example Enhancement**:

**Before** (v0.0.2):

```
Error: Undefined variable 'velocty'
  --> move.ferris:5:10
   |
 5 |     self.velocty.x += 50.0;
   |          ^^^^^^^ not found in this scope
```

**After** (v0.0.3):

```
Error[E201]: Undefined variable
  --> move.ferris:5:10
   |
 5 |     self.velocty.x += 50.0;
   |          ^^^^^^^ not found in this scope
   |
help: a variable with a similar name exists
   |
 5 |     self.velocity.x += 50.0;
   |          ^^^^^^^^
   |
   = note: see https://ferrisscript.dev/errors/E201 for more information
```

**Rationale**: Significantly improves debugging experience. Sets up error reporting infrastructure for LSP integration in v0.0.5.

**Estimated Effort**: 3-4 days

**Components Affected**: Compiler error reporting, type checker

---

### 2. VS Code Extension Polish

**Status**: ‚è≥ In Progress (Phase 4 ‚úÖ, Phase 5 pending)  
**Priority**: High

**Prerequisites**: v0.0.2 syntax highlighting ‚úÖ

**Scope**:

#### Phase 4: Code Completion ‚úÖ (Complete - October 7, 2025)

- [x] Add code completion for basic keywords:
  - let, let mut, fn, if, else, while, return, true, false
  - Context-aware: statement-level vs expression keywords
- [x] Type completion (i32, f32, bool, String, Vector2, Node, void)
- [x] Built-in function completion (print with parameter hints)
- [x] TypeScript extension infrastructure
- [x] Completion provider with VS Code API
- **Document**: [PHASE_4_VS_CODE_COMPLETION.md](./PHASE_4_VS_CODE_COMPLETION.md)
- **Testing**: [PHASE_4_MANUAL_TESTING.md](./PHASE_4_MANUAL_TESTING.md)

#### Phase 5: Hover & Problem Panel (Next)

- [ ] Implement hover tooltips:
  - Show type information for variables
  - Show function signatures
  - Show documentation for built-in types
- [ ] Integrate with VS Code problem panel:
  - Show compiler errors inline
  - Show warnings
  - Quick fixes for common issues
- [ ] Add file icons for `.ferris` files
- [ ] Improve extension marketplace presentation:
  - Better description
  - Screenshots
  - Usage examples
  - Install instructions

**Rationale**: Professional editor experience attracts more developers. Prepares infrastructure for LSP server connection in v0.0.5.

**Estimated Effort**:

- Phase 4 (Completion): 1 day ‚úÖ
- Phase 5 (Hover/Problem Panel): 2-3 days

**Technical Approach**: Use VS Code Language Client API without full LSP (simplified completion/hover)

---

### 3. Development Scripts

**Status**: Not Started  
**Priority**: High

**Scope**:

- [ ] Create `scripts/test.sh`:
  - Run all workspace tests
  - Run with coverage
  - Run with output
- [ ] Create `scripts/bench.sh`:
  - Run all benchmarks
  - Compare with baseline
  - Generate reports
- [ ] Create `scripts/format.sh`:
  - Run cargo fmt on all crates
  - Check formatting in CI mode
- [ ] Create `scripts/coverage.sh`:
  - Generate coverage reports
  - Open HTML report in browser
  - Upload to coverage service
- [ ] Create `scripts/lint.sh`:
  - Run cargo clippy
  - Run markdown linting
  - Run all quality checks
- [ ] Add pre-commit hooks:
  - Format check
  - Lint check
  - Test check
- [ ] Document all scripts in `scripts/README.md`

**Rationale**: Streamlines development workflow. Makes it easier for contributors to run quality checks locally.

**Estimated Effort**: 2 days

---

## üìä Medium Priority Deliverables

### Performance Benchmarking Framework

**Status**: Not Started  
**Priority**: Medium

**Scope**:

- [ ] Add criterion.rs benchmarks:
  - Lexer performance
  - Parser performance
  - Type checker performance
  - Runtime execution performance
- [ ] Create baseline measurements
- [ ] Compare with GDScript (if possible)
- [ ] Set up benchmark tracking in CI
- [ ] Document performance characteristics

**Estimated Effort**: 2-3 days

---

### Integration Tests

**Status**: Not Started  
**Priority**: Medium

**Scope**:

- [ ] Test full compiler ‚Üí runtime pipeline
- [ ] Test Godot integration end-to-end
- [ ] Test cross-platform builds:
  - Linux
  - Windows
  - macOS
- [ ] Add integration test suite

**Estimated Effort**: 2 days

---

### Cross-Platform Build Verification

**Status**: Not Started  
**Priority**: Medium

**Scope**:

- [ ] Verify Linux builds work
- [ ] Verify Windows builds work
- [ ] Verify macOS builds work
- [ ] Document platform-specific issues
- [ ] Add platform badges to README

**Estimated Effort**: 1-2 days

---

## üìù Additional Tasks from v0.0.2 Deferral

The following items were deferred from v0.0.2 and align with v0.0.3's theme of editor experience, CI/CD improvements, and developer tooling:

### Testing & Edge Cases

**Priority**: Low-Medium

- [ ] **Very large number literals testing** - Test edge cases with extremely large numeric literals
- [ ] **Comment parsing edge cases** - Test edge cases in comment handling (nested, malformed, etc.)
- [ ] **Very long lines testing** - Test handling of exceptionally long source lines

**Rationale**: Improve parser robustness. Low priority as these are uncommon edge cases.

**Estimated Effort**: 1 day total

---

### Documentation Improvements

**Priority**: Medium

- [ ] **Test coverage badge** - Add code coverage badge to README.md
- [ ] **Rustdoc hosting** - Set up rustdoc generation and hosting (GitHub Pages or docs.rs)
- [ ] **Documentation deployment** - Automate documentation deployment in CI

**Rationale**: Professional project presentation and accessible API documentation.

**Estimated Effort**: 1-2 days

---

### Code Quality

**Priority**: Medium

- [ ] **Future clippy warnings review** - Ongoing maintenance task for new clippy warnings
- [ ] **Code organization improvements** - Extract large functions (>100 lines), add module-level docs, organize imports consistently

**Rationale**: Proactive refactoring to maintain code quality as project grows.

**Estimated Effort**: 2-3 days

---

### CI/CD Enhancements

**Priority**: High

- [ ] **Cross-platform build tests** - Set up CI for Linux/macOS builds (already covered in main roadmap)
- [ ] **Path-based conditional CI** - Optimize CI to skip tests for docs-only changes (see workflow strategy above)

**Rationale**: Significant CI cost savings (~95% for docs PRs, ~60% for code PRs). Already planned in workflow strategy.

**Estimated Effort**: Included in workflow strategy implementation

---

### Tooling

**Priority**: High

- [ ] **Development scripts** - Already covered in High Priority Deliverables (scripts/test.sh, bench.sh, format.sh, lint.sh)
- [ ] **VS Code marketplace submission** - Polish and submit extension to marketplace

**Rationale**: Professional distribution of VS Code extension.

**Estimated Effort**: 1-2 days (polish + submission)

---

### GitHub Project Management

**Priority**: Low-Medium

- [ ] **GitHub Badges** - Add badges to README: version, build status, coverage, license, Rust version, Godot version
- [ ] **Label system** - Create comprehensive label system (~20 labels) for issues/PRs
- [ ] **v0.0.2 Milestone** - Create v0.0.2 milestone retroactively for documentation
- [ ] **Branch protection** - Enable branch protection on main (require PR reviews, passing CI)

**Rationale**: Professional project management and GitHub best practices.

**Estimated Effort**: 1 day total

---

### Godot Integration

**Priority**: Medium

- [ ] **Colorized error output in Godot console** - Enhance error messages with color in Godot editor console

**Rationale**: Improves debugging experience within Godot. Complements enhanced error diagnostics.

**Estimated Effort**: 1 day

---

**Note**: These deferred items are supplementary to the core v0.0.3 deliverables. Prioritize the main roadmap items (error codes, VS Code polish, dev scripts) before tackling deferred items. Many deferred items align with or enhance planned work.

---

## üéØ Success Metrics

### Quantitative Goals

- [ ] Error codes implemented for all error types
- [ ] 50%+ of common typos have suggestions
- [ ] VS Code extension has 100+ downloads
- [ ] Benchmark baseline established
- [ ] Cross-platform builds verified

### Qualitative Goals

- [ ] Error messages are significantly more helpful
- [ ] VS Code extension feels professional
- [ ] Development scripts are easy to use
- [ ] Contributors can run all checks locally

---

## üö´ Out of Scope

The following are explicitly **NOT** included in v0.0.3:

- ‚ùå LSP implementation (deferred to v0.0.5)
- ‚ùå New language features
- ‚ùå Godot API expansions (deferred to v0.0.4)
- ‚ùå Signal support
- ‚ùå Hot reload
- ‚ùå Full language server features

---

## üìã Task Breakdown

### Week 1

- Day 1-2: Implement error code system
- Day 3-4: Add "did you mean?" suggestions
- Day 5-7: Create error code documentation

### Week 2

- Day 1-2: VS Code code completion
- Day 3-4: VS Code hover tooltips and problem panel
- Day 5-7: Development scripts

### Week 3 (Buffer)

- Day 1-2: Benchmarking framework
- Day 3-4: Integration tests
- Day 5: Final testing and polish

---

## üîó Dependencies for Next Version

**Enables v0.0.4**:

- ‚úÖ Enhanced diagnostics ‚Üí Better debugging for API development
- ‚úÖ VS Code polish ‚Üí Better experience while adding Godot features
- ‚úÖ Dev scripts ‚Üí Faster iteration on Godot integration

**Critical Path**:

v0.0.2 (Foundation) ‚Üí v0.0.3 (Editor Alpha) ‚Üí v0.0.4 (Godot API)

---

## üìù Notes

### üå≥ Development Workflow (NEW in v0.0.3)

**Starting with v0.0.3, we're implementing a staged development workflow to improve integration testing and CI efficiency.**

#### Branching Strategy

**Branch Structure**:

- `main`: Production-ready code, protected, only receives PRs from `develop`
- `develop`: Integration/staging branch for feature testing
- `feature/*`: Individual feature branches (created from `develop`)

**Workflow**:

1. **Create feature branch from develop**:

   ```bash
   git checkout develop
   git pull origin develop
   git checkout -b feature/my-feature
   ```

2. **Develop and test locally**:

   ```bash
   cargo test --workspace
   cargo clippy --workspace -- -D warnings
   ```

3. **PR feature ‚Üí develop** (for integration testing):
   - Minimal CI runs on feature branches (lint + unit tests only)
   - Full CI suite runs on `develop` after merge
   - Multiple features can be integrated and tested together

4. **PR develop ‚Üí main** (for release):
   - After multiple features tested on `develop`
   - Full CI suite runs on `main` after merge
   - Triggers release preparation workflow

**Benefits**:

- **Integration Testing**: Test multiple features together before production
- **Batch Releases**: Group related features for better changelog organization
- **CI Cost Reduction**: Avoid expensive full CI runs on every feature branch push
- **Cleaner History**: Main branch shows release-level merges, not individual features

#### CI Optimization Strategy

**Current Issue**: Full CI runs on every feature branch push (expensive, time-consuming)

**v0.0.3 Solution**:

**Full CI Suite** (all tests, cross-platform builds, coverage) runs on:

- `develop` branch (every push)
- `main` branch (every push)
- Pull requests to `main` (for final release validation)

**Minimal CI** (lint + unit tests only) runs on:

- `feature/*` branches (every push)
- Pull requests to `develop` (fast feedback for feature development)

**Manual Trigger** available for:

- Full CI on feature branches when needed (before major PRs)
- Coverage reports on feature branches (for significant changes)

**Implementation** (GitHub Actions):

```yaml
# .github/workflows/ci.yml
on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  quick-checks:
    if: github.ref != 'refs/heads/main' && github.ref != 'refs/heads/develop'
    # Run only lint and unit tests for feature branches

  full-suite:
    if: github.ref == 'refs/heads/main' || github.ref == 'refs/heads/develop'
    # Run all tests, cross-platform builds, coverage for main/develop
```

**Expected Savings**:

- **~95% CI time savings** for docs-only PRs (skip tests entirely)
- **~60% CI time savings** for code PRs (skip integration tests and cross-platform builds on features)
- **~70% cost reduction** in CI minutes usage
- **Faster feedback** for feature development (2-3 min vs 10-15 min)

**Path Filters** (further optimization):

```yaml
# Skip CI for docs-only changes on feature branches
paths-ignore:
  - 'docs/**'
  - '*.md'
  - 'LICENSE'
  - '.gitignore'
```

#### Migration Plan

**Phase 1: Setup** (with first v0.0.3 feature):

1. Create `develop` branch from `main` (after v0.0.2 release)
2. Update GitHub branch protection rules:
   - Protect `main`: require PR from `develop` only
   - Protect `develop`: require PR from `feature/*` branches
3. Update CI workflow with branch conditions

**Phase 2: Adoption** (throughout v0.0.3):

- All new features use `feature/*` ‚Üí `develop` ‚Üí `main` flow
- Document workflow in CONTRIBUTING.md
- Update issue templates to reference new workflow

**Phase 3: Optimization** (end of v0.0.3):

- Analyze CI cost savings
- Tune path filters based on usage patterns
- Add manual CI trigger documentation

#### Developer Experience

**Creating Feature Branch**:

```bash
# Start new feature
git checkout develop
git pull origin develop
git checkout -b feature/error-code-system

# Work on feature
# ... make changes ...
cargo test --workspace  # Quick local validation

# Push and create PR to develop
git push -u origin feature/error-code-system
gh pr create --base develop --title "feat: Add error code system"
```

**Integrating Multiple Features**:

```bash
# On develop branch, after multiple feature PRs merged
git checkout develop
git pull origin develop

# Full CI runs automatically, test integration
# If integration tests pass, ready for release PR

# Create release PR
gh pr create --base main --title "release: v0.0.3 - Editor Experience Alpha"
```

**Benefits for Contributors**:

- Faster CI feedback (2-3 min vs 10-15 min)
- Less wait time for PR checks
- Clear separation of feature vs release testing
- Easier to understand PR flow

### Technical Considerations

**Error Suggestions Algorithm**:

- Use Levenshtein distance for string similarity
- Consider context (variable scope, type compatibility)
- Limit suggestions to top 3 most likely candidates
- Only suggest if similarity > 70%

**VS Code Extension Architecture**:

- Keep extension lightweight (no bundled dependencies)
- Use VS Code built-in APIs where possible
- Prepare for LSP server connection in v0.0.5
- Store user preferences (formatting, snippets, etc.)

### Release Checklist

- [ ] All tests passing
- [ ] Error codes documented
- [ ] VS Code extension updated on marketplace
- [ ] Development scripts tested on all platforms
- [ ] CHANGELOG.md updated
- [ ] Version numbers bumped
- [ ] Tag created: v0.0.3
- [ ] GitHub release created

### Communication

- [ ] Announce improved error diagnostics
- [ ] Share examples of "did you mean?" suggestions
- [ ] Promote enhanced VS Code extension
- [ ] Request feedback on error messages

---

**Last Updated**: October 2025  
**Status**: üü° Planning  
**Previous Version**: v0.0.2 (Foundation & Polish)  
**Next Version**: v0.0.4 (Godot API Expansion)
